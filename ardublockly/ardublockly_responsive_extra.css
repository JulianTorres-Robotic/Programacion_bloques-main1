/*********************************************/
/*  ADDITIONAL RESPONSIVE ENHANCEMENTS      */
/*********************************************/

/* Mobile layout improvements */
@media only screen and (max-width: 600px) {
  /* Better body reset */
  body {
    overflow-x: hidden;
  }

  /* Navigation improvements */
  nav .nav-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 8px !important;
  }

  nav .brand-logo {
    position: relative !important;
    left: 0 !important;
    transform: none !important;
    display: flex;
    align-items: center;
    flex: 1;
  }

  nav #nav-mobile {
    display: none !important;
  }

  /* Column stacking on mobile */
  .row .col.s12,
  .row .col.m12,
  .row .col.l8,
  .row .col.l4 {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 4px !important;
  }

  /* Blockly and code areas stack vertically */
  .col.s12.m12.l8 {
    margin-bottom: 12px;
  }

  /* Better content heights on mobile */
  .blocks_panel_large {
    height: 400px !important;
  }

  #content_blocks {
    height: 400px !important;
  }

  .content_arduino_large,
  .content_xml_large {
    height: 300px !important;
  }

  /* Sidebar improvements */
  .side-nav {
    padding: 0 !important;
  }

  .side-nav .collapsible-body {
    padding: 0 !important;
  }

  .side-nav .collapsible-body ul {
    padding: 0 !important;
  }

  .side-nav .collapsible-body li {
    margin: 2px 4px !important;
  }

  /* Toolbox button improvements */
  #button_toggle_toolbox {
    border-radius: 8px !important;
  }

  /* Better modal heights */
  .modal-content h4,
  .modal-content h5 {
    font-size: 1.3rem !important;
    margin: 8px 0 !important;
  }

  .modal_section {
    margin: 12px 0 !important;
  }

  .modal_section label {
    display: block;
    margin-bottom: 6px;
  }

  .modal_section input,
  .modal_section select {
    width: 100% !important;
  }
}

/* Tablet range enhancements */
@media only screen and (min-width: 601px) and (max-width: 992px) {
  /* Better column spacing */
  .row .col {
    padding: 0 8px;
  }

  /* Balanced layout for tablet */
  .blocks_panel_large {
    height: 500px !important;
  }

  #content_blocks {
    height: 500px !important;
  }

  .content_arduino_large,
  .content_xml_large {
    height: 400px !important;
  }

  /* Navigation improvements */
  nav .brand-logo {
    font-size: 1.6rem;
  }

  /* Better sidebar for tablet */
  ul.side-nav {
    width: 280px !important;
  }

  /* Modal sizing for tablet */
  .modal {
    width: 80% !important;
    max-width: 600px !important;
  }

  .modal_small {
    width: 60% !important;
    max-width: 450px !important;
  }
}

/* Desktop optimizations */
@media only screen and (min-width: 993px) {
  /* Optimal content heights for desktop */
  .blocks_panel_large {
    height: calc(100vh - 200px) !important;
    max-height: 800px;
  }

  #content_blocks {
    height: calc(100vh - 200px) !important;
    max-height: 800px;
  }

  .content_arduino_large {
    height: calc(100vh - 290px) !important;
    max-height: 700px;
  }

  .content_xml_large {
    height: calc(100vh - 296px) !important;
    max-height: 700px;
  }

  /* Better spacing */
  .row {
    margin-bottom: 24px;
  }

  /* Enhanced interaction */
  .card-panel:hover,
  .card:hover {
    transform: translateY(-2px);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    box-shadow: -12px -12px 24px var(--neo-shadow-light),
      12px 12px 24px var(--neo-shadow-dark) !important;
  }

  /* Collapsible enhancements */
  .collapsible-header:not(.active):hover {
    transform: translateY(-1px);
    transition: transform 0.2s ease;
  }
}

/* Very small devices (< 360px) */
@media only screen and (max-width: 359px) {
  .sketch_name_wrapper {
    max-width: 140px;
    padding: 2px 6px;
  }

  .sketch_name {
    font-size: 0.9rem !important;
    max-width: 100px !important;
  }

  .app_title {
    font-size: 0.75rem !important;
  }

  #ide_buttons_wrapper {
    width: 44px;
  }

  #button_ide_large,
  #button_ide_middle,
  #button_ide_left {
    width: 44px !important;
    height: 44px !important;
  }

  .collapsible-header {
    font-size: 0.85rem !important;
    padding: 6px 10px !important;
  }
}

/* Wide desktop (> 1600px) */
@media only screen and (min-width: 1600px) {
  .container {
    max-width: 1800px;
    margin: 0 auto;
  }

  /* Better use of space on wide screens */
  .blocks_panel_large {
    max-height: 900px;
  }

  .content_arduino_large,
  .content_xml_large {
    max-height: 800px;
  }

  /* Larger touch targets even on desktop for accessibility */
  .btn,
  .btn-large {
    min-height: 42px;
  }
}

/* Portrait tablet specific */
@media only screen and (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
  /* Stack layout vertically like mobile but with more space */
  .row .col.l8,
  .row .col.l4 {
    width: 100% !important;
  }

  .col.l8 {
    margin-bottom: 16px;
  }

  .blocks_panel_large {
    height: 450px !important;
  }

  #content_blocks {
    height: 450px !important;
  }
}

/* Better focus states for keyboard navigation */
@media screen {
  a:focus,
  button:focus,
  input:focus,
  select:focus,
  textarea:focus,
  .btn:focus,
  .btn-floating:focus,
  .collapsible-header:focus {
    outline: 3px solid var(--neo-accent);
    outline-offset: 2px;
  }
}
